<!--
doc/src/sgml/ref/postgres-ref.sgml
PostgreSQL documentation
-->

<refentry id="app-postgres">
 <indexterm zone="app-postgres">
  <primary>postgres</primary>
 </indexterm>
 <refmeta>
  <refentrytitle><application>postgres</application></refentrytitle>
  <manvolnum>1</manvolnum>
  <refmiscinfo>Application</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>postgres</refname>
  <!-- 
  <refpurpose><productname>PostgreSQL</productname> database server</refpurpose> 
  -->
  <refpurpose><productname>PostgreSQL</productname> 数据库服务器</refpurpose>
 </refnamediv>

 <refsynopsisdiv>
  <cmdsynopsis>
   <command>postgres</command>
   <arg rep="repeat"><replaceable>option</></arg>
  </cmdsynopsis>
 </refsynopsisdiv>

 <refsect1>
  <!--
<title>Description</title>
-->
<title>描述</title>

  <!--
<para>
   <command>postgres</command> is the
   <productname>PostgreSQL</productname> database server.  In order
   for a client application to access a database it connects (over a
   network or locally) to a running <command>postgres</command> instance.
   The <command>postgres</command> instance then starts a separate server
   process to handle the connection.
  </para>
-->
<para>
<command>postgres</command>是<productname>PostgreSQL</productname>数据库服务器。
客户端应用程序为了访问数据库，将通过网络或本地连接到一个运行中的
<command>postgres</command>进程。然后该<command>postgres</command>
实例将启动一个独立的服务器进程来处理这个连接。
</para>

  <!--
<para>
   One <command>postgres</command> instance always manages the data of
   exactly one database cluster.  A database cluster is a collection
   of databases that is stored at a common file system location (the
   <quote>data area</quote>).  More than one
   <command>postgres</command> instance can run on a system at one
   time, so long as they use different data areas and different
   communication ports (see below).  When
   <command>postgres</command> starts it needs to know the location
   of the data area.  The location must be specified by the
   <option>-D</option> option or the <envar>PGDATA</envar> environment
   variable; there is no default.  Typically, <option>-D</option> or
   <envar>PGDATA</envar> points directly to the data area directory
   created by <xref linkend="app-initdb">.  Other possible file layouts are
   discussed in <xref linkend="runtime-config-file-locations">.
  </para>
-->
<para>
一个<command>postgres</command>总是管理来自同一个数据库集群的数据。
一个数据库集群是一组在同一个文件系统位置(<quote>数据区</quote>)存放数据的数据库。
一个系统上可以同时运行多个<command>postgres</command>进程，
只要他们使用不同的数据区和不同的端口号(见下文)。<command>postgres</command>
启动时需要知道数据区的位置，该位置必须通过<option>-D</option>选项或<envar>PGDATA</envar>
环境变量指定；没有缺省值。通常，<option>-D</option>或<envar>PGDATA</envar>
都直接指向由<xref linkend="app-initdb">创建的数据区。其他可能的文件布局在
<xref linkend="runtime-config-file-locations">里面有讨论。
</para>

  <!--
<para>
   By default <command>postgres</command> starts in the
   foreground and prints log messages to the standard error stream.  In
   practical applications <command>postgres</command>
   should be started as a background process, perhaps at boot time.
  </para>
-->
<para>
缺省时<command>postgres</command>在前台启动并将日志信息输出到标准错误。
但在实际应用中，<command>postgres</command>应当作为后台进程启动，而且多数是在系统启动时自动启动。
</para>

  <!--
<para>
   The <command>postgres</command> command can also be called in
   single-user mode.  The primary use for this mode is during
   bootstrapping by <xref linkend="app-initdb">.  Sometimes it is used
   for debugging or disaster recovery;  note that running a single-user
   server is not truly suitable for debugging the server, since no
   realistic interprocess communication and locking will happen.
   When invoked in single-user
   mode from the shell, the user can enter queries and the results
   will be printed to the screen, but in a form that is more useful
   for developers than end users.  In the single-user mode,
   the session user will be set to the user with ID 1, and implicit
   superuser powers are granted to this user.
   This user does not actually have to exist, so the single-user mode
   can be used to manually recover from certain
   kinds of accidental damage to the system catalogs.
  </para>
-->
<para>
<command>postgres</command>还能以单用户模式运行。这种用法主要用于<xref linkend="app-initdb">
的初始化过程中。有时候它也被用于调试或灾难性恢复。注意，
单用户模式运行的服务器并不适合于调试，因为没有实际的进程间通讯和锁动作发生。
当从 shell 上以单用户模式调用时，用户可以输入查询，
然后结果会在屏幕上以一种更适合开发者阅读(不适合普通用户)的格式显示出来。
在单用户模式下，将把会话用户 ID 设为 1 并赋予超级用户权限。该用户不必实际存在，
因此单用户模式运行的服务器可以用于对某些意外损坏的系统表进行手工恢复。
</para>
 </refsect1>

 <refsect1 id="app-postgres-options">
  <!-- 
  <title>Options</title> 
  -->
  <title>选项</title>

   <!--
<para>
    <command>postgres</command> accepts the following command-line
    arguments.  For a detailed discussion of the options consult <xref
    linkend="runtime-config">.  You can save typing most of these
    options by setting up a configuration file.  Some (safe) options
    can also be set from the connecting client in an
    application-dependent way to apply only for that session.  For
    example, if the environment variable <envar>PGOPTIONS</envar> is
    set, then <application>libpq</>-based clients will pass that
    string to the server, which will interpret it as
    <command>postgres</command> command-line options.
   </para>
-->
<para>
<command>postgres</command>接受下列命令行参数。关于这些选项的更详细讨论请参考
<xref linkend="runtime-config">。你也可以通过设置一个配置文件来减少敲击这些选项。
有些(安全的)选项还可以从连接过来的客户端设置，以一种应用相关的方法仅对该会话生效。
比如，如果设置了<envar>PGOPTIONS</envar>环境变量，那么基于<application>libpq</>
的客户端就都把那个字符串传递给服务器，并被服务器解释成<command>postgres</command>命令行选项。
</para>

   <refsect2>
    <!-- 
<title>General Purpose</title> 
-->
<title>通用用途</title>

    <variablelist>
     <varlistentry>
      <term><option>-A 0|1</option></term>
      <listitem>
       <!--
<para>
        Enables run-time assertion checks, which is a debugging aid to
        detect programming mistakes.  This option is only available if
        assertions were enabled when <productname>PostgreSQL</> was
        compiled. If so, the default is on.
       </para>
-->
<para>
打开运行时断言检查，是检测编程错误的调试帮助。只有在编译<productname>PostgreSQL</>
时打开了它，你才能使用它。缺省是打开。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-B <replaceable class="parameter">nbuffers</replaceable></option></term>
      <listitem>
       <!--
<para>
        Sets the number of shared buffers for use by the server
        processes.  The default value of this parameter is chosen
        automatically by <application>initdb</application>.
        Specifying this option is equivalent to setting the
        <xref linkend="guc-shared-buffers"> configuration parameter.
       </para>
-->
<para>
为服务器进程分配和管理的共享内存缓冲区数量。这个参数的缺省值是
<application>initdb</application>自动选择的；声明这个选项等同于设置
<xref linkend="guc-shared-buffers">配置参数。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-c <replaceable>name</replaceable>=<replaceable>value</replaceable></option></term>
      <listitem>
       <!--
<para>
        Sets a named run-time parameter. The configuration parameters
        supported by <productname>PostgreSQL</productname> are
        described in <xref linkend="runtime-config">. Most of the
        other command line options are in fact short forms of such a
        parameter assignment.  <option>-c</> can appear multiple times
        to set multiple parameters.
       </para>
-->
<para>
设置一个命名的运行时参数。<productname>PostgreSQL</productname>支持的配置参数在
<xref linkend="runtime-config">里描述。大多数其它命令行选项实际上都是这样的参数赋值的短形式。
<option>-c</>可以出现多次从而设置多个参数。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-C <replaceable>name</replaceable></option></term>
      <listitem>
       <!--
<para>
        Prints the value of the named run-time parameter, and exits.
        (See the <option>-c</> option above for details.)  This can
        be used on a running server, and returns values from
        <filename>postgresql.conf</>, modified by any parameters
        supplied in this invocation.  It does not reflect parameters
        supplied when the cluster was started.
       </para>
-->
<para>
打印命名的运行时参数的值，然后退出。（参阅上面的<option>-c</>选项获取详细信息。）
这个选项可以在一个运行的服务器上使用，返回来自<filename>postgresql.conf</>的值，
通过在这个调用中提供的参数修改。当集群启动时，它不反应提供的参数。
</para>

       <!--
<para>
        This option is meant for other programs that interact with a server
        instance, such as <xref linkend="app-pg-ctl">, to query configuration
        parameter values.  User-facing applications should instead use <xref
        linkend="sql-show"> or the <structname>pg_settings</structname> view.
       </para>
-->
<para>
这个选项本应为与服务器进程交互的其他程序，例如<xref linkend="app-pg-ctl">，
查询配置参数值。面向用户的应用应该使用xref linkend="sql-show">或
<structname>pg_settings</structname>视图。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-d <replaceable>debug-level</replaceable></option></term>
      <listitem>
       <!--
<para>
        Sets the debug level.  The higher this value is set, the more
        debugging output is written to the server log.  Values are
        from 1 to 5.  It is also possible to pass <literal>-d
        0</literal> for a specific session, which will prevent the
        server log level of the parent <command>postgres</> process from being
        propagated to this session.
       </para>
-->
<para>
设置调试级别。数值越高，写到服务器日志的调试输出越多。取值范围是 1 到 5 。
还可以针对某次单独的会话使用<literal>-d 0</literal>来防止从父<command>postgres</> 
进程继承日志级别。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-D <replaceable class="parameter">datadir</replaceable></option></term>
      <listitem>
       <!--
<para>
        Specifies the file system location of the database
        configuration files.  See
        <xref linkend="runtime-config-file-locations"> for details.
       </para>
-->
<para>
声明数据库配置文件的文件系统路径。细节详见<xref linkend="runtime-config-file-locations">。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-e</option></term>
      <listitem>
       <!--
<para>
        Sets the default date style to <quote>European</quote>, that is
        <literal>DMY</> ordering of input date fields.  This also causes
        the day to be printed before the month in certain date output formats.
        See <xref linkend="datatype-datetime"> for more information.
       </para>
-->
<para>
把缺省日期风格设置为<quote>European</quote>，也就是说用<literal>DMY</>规则解释日期输入，
并且在一些日期输出格式里日子在月份前面打印。参阅<xref linkend="datatype-datetime">获取更多细节。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-F</option></term>
      <listitem>
       <!--
<para>
        Disables <function>fsync</function> calls for improved
        performance, at the risk of data corruption in the event of a
        system crash.  Specifying this option is equivalent to
        disabling the <xref linkend="guc-fsync"> configuration
        parameter. Read the detailed documentation before using this!
       </para>
-->
<para>
关闭<function>fsync</function>调用以提高性能，但是要冒系统崩溃时数据毁坏的风险。
声明这个选项等效关闭了<xref linkend="guc-fsync">参数。在使用之前阅读详细文档！
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-h <replaceable class="parameter">hostname</replaceable></option></term>
      <listitem>
       <!--
<para>
        Specifies the IP host name or address on which
        <command>postgres</command> is to listen for TCP/IP
        connections from client applications.  The value can also be a
        comma-separated list of addresses, or <literal>*</> to specify
        listening on all available interfaces.  An empty value
        specifies not listening on any IP addresses, in which case
        only Unix-domain sockets can be used to connect to the
        server.  Defaults to listening only on
        <systemitem class="systemname">localhost</systemitem>.
        Specifying this option is equivalent to setting the <xref
        linkend="guc-listen-addresses"> configuration parameter.
       </para>
-->
<para>
指定<command>postgres</command>侦听来自前端应用 TCP/IP 连接的 IP 主机名或地址。
数值也可以是一个用逗号分隔的地址列表，或者<literal>*</>表示监听所有可用的地址。
空值表示不监听任何 IP 地址，而只使用 Unix 域套接字与服务器连接。
缺省只监听<systemitem class="systemname">localhost</systemitem>。
声明这个选项等效于设置<xref linkend="guc-listen-addresses">配置参数。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-i</option></term>
      <listitem>
       <!--
<para>
        Allows remote clients to connect via TCP/IP (Internet domain)
        connections.  Without this option, only local connections are
        accepted.  This option is equivalent to setting
        <varname>listen_addresses</> to <literal>*</> in
        <filename>postgresql.conf</> or via <option>-h</>.
       </para>
-->
<para>
这个选项允许远程客户通过 TCP/IP(网际域套接字)与服务器通讯。没有这个选项，
服务器将只接受本地连接。这个选项等效于在<filename>postgresql.conf</>
中或者通过<option>-h</>选项将<varname>listen_addresses</>设为<literal>*</>。
</para>
       <!--
<para>
        This option is deprecated since it does not allow access to the
        full functionality of <xref linkend="guc-listen-addresses">.
        It's usually better to set <varname>listen_addresses</> directly.
       </para>
-->
<para>
这个选项已经废弃了，因为它不能实现<xref linkend="guc-listen-addresses">的所有功能。
所以最好直接设置<varname>listen_addresses</>。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-k <replaceable class="parameter">directory</replaceable></option></term>
      <listitem>
       <!--
<para>
        Specifies the directory of the Unix-domain socket on which
        <command>postgres</command> is to listen for
        connections from client applications.  The value can also be a
        comma-separated list of directories.  An empty value
        specifies not listening on any Unix-domain sockets, in which case
        only TCP/IP sockets can be used to connect to the server.
        The default value is normally
        <filename>/tmp</filename>, but that can be changed at build time.
        Specifying this option is equivalent to setting the <xref
        linkend="guc-unix-socket-directories"> configuration parameter.
       </para>
-->
<para>
指定<command>postgres</command>侦听来自前端应用连接的 Unix 域套接字的目录。
该值也可以是逗号分隔的目录列表。空值表明不监听任何 Unix 域套接字，在这种情况下，
只有TCP/IP套接字可以用来连接到服务器。缺省通常是<filename>/tmp</filename>，
但是可以在编译的时候修改。声明这个选项等同于设置<xref linkend="guc-unix-socket-directories">
配置参数。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-l</option></term>
      <listitem>
       <!--
<para>
        Enables secure connections using <acronym>SSL</acronym>.
        <productname>PostgreSQL</productname> must have been compiled with
        support for <acronym>SSL</acronym> for this option to be
        available. For more information on using <acronym>SSL</acronym>,
        refer to <xref linkend="ssl-tcp">.
       </para>
-->
<para>
这个选项使用<acronym>SSL</acronym>进行的安全通讯。要使用这个选项，
编译<productname>PostgreSQL</productname>时你必须打开了<acronym>SSL</acronym>支持。
有关使用<acronym>SSL</acronym>的信息，请参考<xref linkend="ssl-tcp">。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-N <replaceable class="parameter">max-connections</replaceable></option></term>
      <listitem>
       <!--
<para>
        Sets the maximum number of client connections that this
        server will accept.  The default value of this parameter is chosen
        automatically by <application>initdb</application>.
        Specifying this option is equivalent to setting the
        <xref linkend="guc-max-connections"> configuration parameter.
       </para>
-->
<para>
设置最多允许同时连接多少个客户端(也就是最多同时运行多少个服务器进程)。
这个参数的缺省值自动通过<application>initdb</application>选择。
声明这个选项等效于声明<xref linkend="guc-max-connections">配置参数。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-o <replaceable class="parameter">extra-options</replaceable></option></term>
      <listitem>
       <!--
<para>
        The command-line-style options specified in <replaceable
        class="parameter">extra-options</replaceable> are passed to
        all server processes started by this
        <command>postgres</command> process.  If the option string contains
        any spaces, the entire string must be quoted.
       </para>
-->
<para>
在<replaceable class="parameter">extra-options</replaceable>
里面指定的命令行选项将被传递给所有由这个<command>postgres</command>派生的服务进程。
如果选项字符串包含任何空白，那么整个字符串必须用引号界定。
</para>

       <!--
<para>
        The use of this option is obsolete; all command-line options
        for server processes can be specified directly on the
        <command>postgres</command> command line.
       </para>
-->
<para>
反对使用该选项，所有服务器进程的命令行选项都可以直接在<command>postgres</command>
命令行上指定。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-p <replaceable class="parameter">port</replaceable></option></term>
      <listitem>
       <!--
<para>
        Specifies the TCP/IP port or local Unix domain socket file
        extension on which <command>postgres</command>
        is to listen for connections from client applications.
        Defaults to the value of the <envar>PGPORT</envar> environment
        variable, or if <envar>PGPORT</envar> is not set, then
        defaults to the value established during compilation (normally
        5432).  If you specify a port other than the default port,
        then all client applications must specify the same port using
        either command-line options or <envar>PGPORT</envar>.
       </para>
-->
<para>
指定<command>postgres</command>侦听客户端连接的 TCP/IP 端口或本地 Unix 域套接字文件的扩展。
缺省的端口号是环境变量<envar>PGPORT</envar>的值。如果<envar>PGPORT</envar>没有设置，
那么缺省是 PostgreSQL 编译时指定的值(通常是 5432)。如果你声明了一个非缺省端口，
那么所有前端应用都必须用命令行选项或者<envar>PGPORT</envar>声明同一个端口。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-s</option></term>
      <listitem>
       <!--
<para>
        Print time information and other statistics at the end of each command.
        This is useful for benchmarking or for use in tuning the number of
        buffers.
       </para>
-->
<para>
在每条命令结束时打印时间信息和其它统计信息。这个选项对测试性能和调节缓冲区数量有好处。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-S</option> <replaceable class="parameter">work-mem</replaceable></term>
      <listitem>
       <!--
<para>
        Specifies the amount of memory to be used by internal sorts and hashes
        before resorting to temporary disk files.  See the description of the
        <varname>work_mem</> configuration parameter in <xref
        linkend="runtime-config-resource-memory">.
       </para>
-->
<para>
声明内部排序和散列在求助于临时磁盘文件之前可以使用的内存数量。
参阅<xref linkend="runtime-config-resource-memory">里描述的配置变量<varname>work_mem</>。 
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-V</></term>
      <term><option>--version</></term>
      <listitem>
       <!--
<para>
        Print the <application>postgres</application> version and exit.
       </para>
-->
<para>
打印<application>postgres</application>版本然后退出。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--<replaceable>name</replaceable>=<replaceable>value</replaceable></option></term>
      <listitem>
       <!--
<para>
        Sets a named run-time parameter; a shorter form of
        <option>-c</>.
       </para>
-->
<para>
设置一个命名的运行时参数；其缩写形式是<option>-c</>。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--describe-config</option></term>
      <listitem>
       <!--
<para>
        This option dumps out the server's internal configuration variables,
        descriptions, and defaults in tab-delimited <command>COPY</> format.
        It is designed primarily for use by administration tools.
       </para>
-->
<para>
以制表符分隔的<command>COPY</>格式，导出服务器内部配置变量、描述、缺省值。
设计它主要是给管理工具使用。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-?</></term>
      <term><option>--help</></term>
      <listitem>
       <!--
<para>
        Show help about <application>postgres</application> command line
        arguments, and exit.
       </para>
-->
<para>
显示关于<application>postgres</application>命令行参数的帮助然后退出。
</para>
      </listitem>
     </varlistentry>
    </variablelist>
   </refsect2>

   <refsect2>
    <!-- 
<title>Semi-internal Options</title>
-->
<title>部分内部选项</title>

    <!--
<para>
     The options described here are used
     mainly for debugging purposes, and in some cases to assist with
     recovery of severely damaged databases. There should be no reason
     to use them in a production database setup.  They are listed
     here only for use by <productname>PostgreSQL</productname>
     system developers.  Furthermore, these options might
     change or be removed in a future release without notice.
    </para>
-->
<para>
这里描述的选项主要用于调试用途，并且在某些情况下帮助严重损坏的数据库恢复。
不应该在生产数据库的设置中使用这些选项。在这里列出只是给<productname>PostgreSQL</productname>
系统开发人员使用的。另外这些选项都可能在未来版本中改变或删除而不加说明。
</para>

    <variablelist>
     <varlistentry>
      <term><option>-f</option> <literal>{ s | i | o | b | t | n | m | h }</literal></term>
      <listitem>
       <!--
<para>
        Forbids the use of particular scan and join methods:
        <literal>s</literal> and <literal>i</literal>
        disable sequential and index scans respectively,
        <literal>o</literal>, <literal>b</literal> and <literal>t</literal>
        disable index-only scans, bitmap index scans, and TID scans
        respectively, while
        <literal>n</literal>, <literal>m</literal>, and <literal>h</literal>
        disable nested-loop, merge and hash joins respectively.
       </para>
-->
<para>
禁止某种扫描和连接方法的使用：<literal>s</literal>和<literal>i</literal>
分别关闭顺序和索引扫描，<literal>o</literal>, <literal>b</literal> 和 
<literal>t</literal>分别关闭只有索引扫描、位图索引扫描和TID扫描，
而<literal>n</literal>, <literal>m</literal>, 和 <literal>h</literal>
分别关闭嵌套循环，融合(merge)和 Hash 连接。
</para>

       <!--
<para>
        Neither sequential scans nor nested-loop joins can be disabled
        completely; the <literal>-fs</literal> and
        <literal>-fn</literal> options simply discourage the optimizer
        from using those plan types if it has any other alternative.
       </para>
-->
<para>
顺序扫描和嵌套循环都不可能完全被关闭。<literal>-fs</literal>和<literal>-fn</literal>
选项仅仅是在存在其它方法时阻碍优化器使用这些方法罢了。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-n</option></term>
      <listitem>
       <!--
<para>
        This option is for debugging problems that cause a server
        process to die abnormally.  The ordinary strategy in this
        situation is to notify all other server processes that they
        must terminate and then reinitialize the shared memory and
        semaphores.  This is because an errant server process could
        have corrupted some shared state before terminating.  This
        option specifies that <command>postgres</command> will
        not reinitialize shared data structures.  A knowledgeable
        system programmer can then use a debugger to examine shared
        memory and semaphore state.
       </para>
-->
<para>
该选项主要用于调试导致服务器进程异常崩溃的问题。
对付这种情况的一般策略是通知所有其它服务器进程终止并重新初始化共享内存和信号灯。
这是因为一个出错的服务器进程可能在终止之前就已经对共享的东西造成了破坏。
该选项指定<command>postgres</command>不重新初始化共享数据结构。
一个有经验的系统程序员这时就可以使用调试器检查共享内存和信号灯状态。
</para>
     </listitem>
    </varlistentry>

     <varlistentry>
      <term><option>-O</option></term>
      <listitem>
       <!--
<para>
        Allows the structure of system tables to be modified.  This is
        used by <command>initdb</command>.
       </para>
-->
<para>
允许修改系统表的结构。这个参数用于<command>initdb</command>。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-P</option></term>
      <listitem>
       <!--
<para>
        Ignore system indexes when reading system tables, but still update
        the indexes when modifying the tables.  This is useful when
        recovering from damaged system indexes.
       </para>
-->
<para>
读取系统表时忽略系统索引，但在更改数据时仍然更新索引。
这对于从索引已经损坏的系统表中恢复是很有帮助的。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-t</option> <literal>pa[rser] | pl[anner] | e[xecutor]</literal></term>
      <listitem>
       <!--
<para>
        Print timing statistics for each query relating to each of the
        major system modules.  This option cannot be used together
        with the <option>-s</option> option.
       </para>
-->
<para>
打印与每个主要系统模块相关的查询记时统计。它不能和<option>-s</option>选项一起使用。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-T</option></term>
      <listitem>
       <!--
<para>
        This option is for debugging problems that cause a server
        process to die abnormally.  The ordinary strategy in this
        situation is to notify all other server processes that they
        must terminate and then reinitialize the shared memory and
        semaphores.  This is because an errant server process could
        have corrupted some shared state before terminating.  This
        option specifies that <command>postgres</command> will
        stop all other server processes by sending the signal
        <literal>SIGSTOP</literal>, but will not cause them to
        terminate.  This permits system programmers to collect core
        dumps from all server processes by hand.
       </para>
-->
<para>
该选项主要用于调试导致服务器进程异常崩溃的问题。
对付这种情况的一般策略是通知所有其它服务器进程终止并重新初始化共享内存和信号灯。
这是因为一个出错的服务器进程可能在终止之前就已经对共享的东西造成了破坏。
该选项指定<command>postgres</command>通过发送<literal>SIGSTOP</literal>
信号停止其他所有服务器进程，但是并不让它们退出。
这样就允许系统程序员手动从所有服务器进程搜集内核转储。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-v</option> <replaceable class="parameter">protocol</replaceable></term>
      <listitem>
       <!--
<para>
        Specifies the version number of the frontend/backend protocol
        to be used for a particular session.  This option is for
        internal use only.
       </para>
-->
<para>
声明这次会话使用的前/后服务器协议的版本数。该选项仅在内部使用。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-W</option> <replaceable class="parameter">seconds</replaceable></term>
      <listitem>
       <!--
<para>
        A delay of this many seconds occurs when a new server process
        is started, after it conducts the authentication procedure.
        This is intended to give an opportunity to attach to the
        server process with a debugger.
       </para>
-->
<para>
一旦看见这个选项，进程就睡眠标出的秒数。这样就给开发者一些时间把调试器附着在该服务器进程上。
</para>
      </listitem>
     </varlistentry>
    </variablelist>
   </refsect2>

   <refsect2>
    <!-- 
<title>Options for Single-User Mode</title> 
-->
<title>单用户模式的选项</title>

    <indexterm>
<!--
     <primary>single-user mode</primary>
-->
     <primary>单用户模式</primary>
    </indexterm>

    <!--
<para>
     The following options only apply to the single-user mode.
    </para>
-->
<para>
下面的选项仅在单用户模式下可用。
</para>

    <variablelist>
     <varlistentry>
      <term><option>--single</option></term>
      <listitem>
       <!--
<para>
        Selects the single-user mode.  This must be the first argument
        on the command line.
       </para>
-->
<para>
选中单用户模式。这个必须是命令行中的第一个选项。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><replaceable class="parameter">database</replaceable></term>
      <listitem>
       <!--
<para>
        Specifies the name of the database to be accessed.  This must be
        the last argument on the command line.  If it is
        omitted it defaults to the user name.
       </para>
-->
<para>
要访问的数据库名字。这个必须是命令行中的最后一个选项。如果忽略掉则缺省为用户名。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-E</option></term>
      <listitem>
       <!--
<para>
        Echo all commands.
       </para>
-->
<para>
回显所有命令。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-j</option></term>
      <listitem>
       <!--
<para>
        Disables use of newline as a statement delimiter.
       </para>
-->
<para>
禁止使用新行作为语句分隔符。
</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-r</option> <replaceable class="parameter">filename</replaceable></term>
      <listitem>
       <!--
<para>
        Send all server log output to <replaceable
        class="parameter">filename</replaceable>.  This option is only
        honored when supplied as a command-line option.
       </para>
-->
<para>
将所有服务器输出日志保存到<replaceable class="parameter">filename</replaceable>中。
这个选项仅在作为一个命令行选项提供时有效。
</para>
      </listitem>
     </varlistentry>
    </variablelist>
   </refsect2>
 </refsect1>

 <refsect1>
  <!-- 
  <title>Environment</title> 
  -->
  <title>环境变量</title>

  <variablelist>
   <varlistentry>
    <term><envar>PGCLIENTENCODING</envar></term>

    <listitem>
     <!--
<para>
      Default character encoding used by clients.  (The clients can
      override this individually.)  This value can also be set in the
      configuration file.
     </para>
-->
<para>
客户端使用的缺省字符编码。客户端可以独立地覆盖它。这个值也可以在配置文件里设置。
</para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><envar>PGDATA</envar></term>

    <listitem>
     <!--
<para>
      Default data directory location
     </para>
-->
<para>
缺省数据目录位置。
</para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><envar>PGDATESTYLE</envar></term>

    <listitem>
     <!--
<para>
      Default value of the <xref linkend="guc-datestyle"> run-time
      parameter.  (The use of this environment variable is deprecated.)
     </para>
-->
<para>
运行时参数<xref linkend="guc-datestyle">的缺省值。现在反对使用该环境变量。
</para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><envar>PGPORT</envar></term>

    <listitem>
     <!--
<para>
      Default port number (preferably set in the configuration file)
     </para>
-->
<para>
缺省端口号(最好在配置文件中设置)。
</para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><envar>TZ</envar></term>

    <listitem>
     <!--
<para>
      Server time zone
     </para>
-->
<para>
服务器的时区。
</para>
    </listitem>
   </varlistentry>

  </variablelist>
 </refsect1>

 <refsect1>
   <!--
   <title>Diagnostics</title> 
   -->
   <title>诊断</title>

   <!--
<para>
    A failure message mentioning <literal>semget</> or
    <literal>shmget</> probably indicates you need to configure your
    kernel to provide adequate shared memory and semaphores.  For more
    discussion see <xref linkend="kernel-resources">.  You might be able
    to postpone reconfiguring your kernel by decreasing <xref
    linkend="guc-shared-buffers"> to reduce the shared memory
    consumption of <productname>PostgreSQL</>, and/or by reducing
    <xref linkend="guc-max-connections"> to reduce the semaphore
    consumption.
   </para>
-->
<para>
一个提到了<literal>semget</>或<literal>shmget</>的错误消息可能意味着你需要重新配置你的内核，
提供足够的共享内存和信号灯。更多讨论，参阅<xref linkend="kernel-resources">。
你也可以通过降低<xref linkend="guc-shared-buffers">值以减少<productname>PostgreSQL</>
的共享内存的消耗，或者降低<xref linkend="guc-max-connections">值减少
<productname>PostgreSQL</>的信号灯的消耗。
</para>

   <!--
<para>
    A failure message suggesting that another server is already running
    should be checked carefully, for example by using the command
<screen>
<prompt>$</prompt> <userinput>ps ax | grep postgres</userinput>
</screen>
        or
<screen>
<prompt>$</prompt> <userinput>ps -ef | grep postgres</userinput>
</screen>
    depending on your system.  If you are certain that no conflicting
    server is running, you can remove the lock file mentioned in the
    message and try again.
   </para>
-->
<para>
如果碰到一个说另外一个服务器正在运行的错误消息，可以根据不同的系统使用命令
<screen>
<prompt>$</prompt> <userinput>ps ax | grep postgres</userinput>
</screen>
或
<screen>
<prompt>$</prompt> <userinput>ps -ef | grep postgres</userinput>
</screen>
如果确信没有冲突的服务器正在运行，那么你可以删除消息里提到的锁文件然后再次运行。
</para>

   <!--
<para>
    A failure message indicating inability to bind to a port might
    indicate that that port is already in use by some
    non-<productname>PostgreSQL</productname> process.  You might also
    get this error if you terminate <command>postgres</command>
    and immediately restart it using the same port; in this case, you
    must simply wait a few seconds until the operating system closes
    the port before trying again.  Finally, you might get this error if
    you specify a port number that your operating system considers to
    be reserved.  For example, many versions of Unix consider port
    numbers under 1024 to be <quote>trusted</quote> and only permit
    the Unix superuser to access them.
   </para>
-->
<para>
抱怨无法绑定端口的错误消息可能表明该端口已经被其它非<productname>PostgreSQL</productname>
进程使用。如果终止<command>postgres</command>后又马上用同一个端口运行它，
也可能得到这个错误消息；这时，你必须多等几秒，等操作系统关闭了该端口后再试。
最后，如果你使用了一个操作系统认为是保留的端口，也可能导致这个错误消息。例如，
许多 Unix 版本认为低于 1024 的端口号是<quote>可信任的</quote>，
因而只有 Unix 超级用户可以使用它们。
</para>

 </refsect1>

 <refsect1>
  <!--
<title>Notes</title>
-->
<title>注意</title>

  <!--
<para>
   The utility command <xref linkend="app-pg-ctl"> can be used to
   start and shut down the <command>postgres</command> server
   safely and comfortably.
  </para>
-->
<para>
<xref linkend="app-pg-ctl">工具可以用于安全而有效地启停<command>postgres</command>服务器。
</para>

  <!--
<para>
   If at all possible, <emphasis>do not</emphasis> use
   <literal>SIGKILL</literal> to kill the main
   <command>postgres</command> server.  Doing so will prevent
   <command>postgres</command> from freeing the system
   resources (e.g., shared memory and semaphores) that it holds before
   terminating.  This might cause problems for starting a fresh
   <command>postgres</command> run.
  </para>
-->
<para>
如果有可能，<emphasis>不要</emphasis>使用<literal>SIGKILL</literal>
杀死主<command>postgres</command>服务器进程。这样会阻止<command>postgres</command>
在退出前释放它持有的系统资源(例如共享内存和信号灯)。这样可能会影响到将来启动新的
<command>postgres</command>进程。
</para>

  <!--
<para>
   To terminate the <command>postgres</command> server normally, the
   signals <literal>SIGTERM</literal>, <literal>SIGINT</literal>, or
   <literal>SIGQUIT</literal> can be used.  The first will wait for
   all clients to terminate before quitting, the second will
   forcefully disconnect all clients, and the third will quit
   immediately without proper shutdown, resulting in a recovery run
   during restart.
  </para>
-->
<para>
可以使用<literal>SIGTERM</literal>, <literal>SIGINT</literal>, <literal>SIGQUIT</literal>
信号正常结束<command>postgres</command>服务器进程。
第一个信号将等待所有的客户端退出后才退出。第二个将强制断开所有客户端，
而第三个将不停止立刻退出，导致在重启时的恢复运行。
</para>

  <!--
<para>
   The <literal>SIGHUP</literal> signal will reload
   the server configuration files.  It is also possible to send
   <literal>SIGHUP</literal> to an individual server process, but that
   is usually not sensible.
  </para>
-->
<para>
<literal>SIGHUP</literal>会重新加载服务器配置文件。
也可以向一个单独的服务器进程发送<literal>SIGHUP</literal>信号，但是这样做没什么意义。
</para>

  <!--
<para>
   To cancel a running query, send the <literal>SIGINT</literal> signal
   to the process running that command. To terminate a backend process
   cleanly, send <literal>SIGTERM</literal> to that process. See
   also <function>pg_cancel_backend</> and <function>pg_terminate_backend</>
   in <xref linkend="functions-admin-signal"> for the SQL-callable equivalents
   of these two actions.
  </para>
-->
<para>
要取消一个正在运行的查询，可以向正在执行该查询的进程发送<literal>SIGINT</literal>信号。
要终止一个后端进程，可以向那个进程发送<literal>SIGTERM</literal>信号。也可以参阅
<xref linkend="functions-admin-signal">里面的<function>pg_cancel_backend</> 和 
<function>pg_terminate_backend</>获取这两个动作的相等SQL调用。
</para>

  <!--
<para>
   The <command>postgres</command> server uses <literal>SIGQUIT</literal>
   to tell subordinate server processes to terminate without normal
   cleanup.
   This signal <emphasis>should not</emphasis> be used by users.  It
   is also unwise to send <literal>SIGKILL</literal> to a server
   process &mdash; the main <command>postgres</command> process will
   interpret this as a crash and will force all the sibling processes
   to quit as part of its standard crash-recovery procedure.
  </para>
-->
<para>
<command>postgres</command>服务器发送<literal>SIGQUIT</literal>
信号告诉子服务器进程立即退出且不做清理工作，用户应当尽量<emphasis>避免</emphasis>
使用该信号。同时，发送<literal>SIGKILL</literal>信号也是不明智的：
主<command>postgres</command>进程将把这个信号当作崩溃信号，
然后会强制其他兄弟进程作为标准的崩溃回复过程退出。
</para>
 </refsect1>

 <refsect1 id="app-postgres-bugs">
  <!-- 
  <title>Bugs</title> 
  -->
  <title>Bug</title>
  <!--
<para>
   The <option>&#045;-</> options will not work on <systemitem
   class="osname">FreeBSD</> or <systemitem class="osname">OpenBSD</>.
   Use <option>-c</> instead. This is a bug in the affected operating
   systems; a future release of <productname>PostgreSQL</productname>
   will provide a workaround if this is not fixed.
  </para>
-->
<para>
<option>--</>选项在<systemitem class="osname">FreeBSD</>或
<systemitem class="osname">OpenBSD</>上无法运行，应该使用<option>-c</>。
这在受影响的系统里是个Bug；如果这个毛病没有修补好，
将来的<productname>PostgreSQL</productname>版本将提供一个绕开的办法。
</para>
 </refsect1>

 <refsect1>
  <!--
<title>Usage</title>
-->
<title>用法</title>

   <!--
<para>
    To start a single-user mode server, use a command like
<screen>
<userinput>postgres &#045;-single -D /usr/local/pgsql/data <replaceable>other-options</> my_database</userinput>
</screen>
    Provide the correct path to the database directory with <option>-D</>, or
    make sure that the environment variable <envar>PGDATA</> is set.
    Also specify the name of the particular database you want to work in.
   </para>
-->
<para>
启动一个单用户模式的服务器：
<screen>
<userinput>postgres --single -D /usr/local/pgsql/data <replaceable>other-options</> my_database</userinput>
</screen>
用<option>-D</>给服务器提供正确的数据库目录的路径，
或者确保环境变量<envar>PGDATA</>已经正确设置。同时还要声名你想用的特定数据库名字。
</para>

   <!--
<para>
    Normally, the single-user mode server treats newline as the command
    entry terminator; there is no intelligence about semicolons,
    as there is in <application>psql</>.  To continue a command
    across multiple lines, you must type backslash just before each
    newline except the last one.
   </para>
-->
<para>
通常，单用户模式的服务器把换行符当做命令输入完成字符；它还不懂分号的作用，
因为那些东西是在<application>psql</>里的。要想把一行分成多行写，
你必需在除最后一个换行符以外的每个换行符前面敲一个反斜杠。
</para>

   <!--
<para>
    But if you use the <option>-j</> command line switch, then newline does
    not terminate command entry.  In this case, the server will read the standard input
    until the end-of-file (<acronym>EOF</>) marker, then
    process the input as a single command string.  Backslash-newline is not
    treated specially in this case.
   </para>
-->
<para>
但是如果使用了<option>-j</>命令行选项，新行将不被当作命令结束符。
此时服务器将从标准输入一直读取到<acronym>EOF</>标志为止，
然后把所有读到的内容当作一个完整的命令字符串看待，
并且反斜杠与换行符也被当作普通字符来看待。
</para>

   <!--
<para>
    To quit the session, type <acronym>EOF</acronym>
    (<keycombo action="simul"><keycap>Control</><keycap>D</></>, usually).
    If you've
    used <option>-j</>, two consecutive <acronym>EOF</>s are needed to exit.
   </para>
-->
<para>
输入<acronym>EOF</acronym>(<keycombo action="simul"><keycap>Control</><keycap>D</></>)
即可退出会话。如果你已经使用了<option>-j</>则必须连续使用两个<acronym>EOF</>才行。
</para>

   <!--
<para>
    Note that the single-user mode server does not provide sophisticated
    line-editing features (no command history, for example).
    Single-User mode also does not do any background processing, like
    automatic checkpoints.

   </para>
-->
<para>
请注意单用户模式运行的服务器不会提供复杂的行编辑功能(比如，没有命令行历史)。
单用户模式也不做任何后台处理，像自动检查点。
</para>
 </refsect1>

 <refsect1 id="app-postgres-examples">
  <!--
<title>Examples</title>
-->
<title>例子</title>

  <!--
<para>
   To start <command>postgres</command> in the background
   using default values, type:

<screen>
<prompt>$</prompt> <userinput>nohup postgres &gt;logfile 2&gt;&amp;1 &lt;/dev/null &amp;</userinput>
</screen>
  </para>
-->
<para>
用缺省值在后台启动<command>postgres</command>：
<screen>
<prompt>$</prompt> <userinput>nohup postgres &gt;logfile 2&gt;&amp;1 &lt;/dev/null &amp;</userinput>
</screen>
</para>

  <!--
<para>
   To start <command>postgres</command> with a specific
   port, e.g. 1234:
<screen>
<prompt>$</prompt> <userinput>postgres -p 1234</userinput>
</screen>
   To connect to this server using <application>psql</>, specify this port with the -p option:
<screen>
<prompt>$</prompt> <userinput>psql -p 1234</userinput>
</screen>
   or set the environment variable <envar>PGPORT</envar>:
<screen>
<prompt>$</prompt> <userinput>export PGPORT=1234</userinput>
<prompt>$</prompt> <userinput>psql</userinput>
</screen>
  </para>
-->
<para>
在指定的端口启动<command>postgres</command>，如1234：
<screen>
<prompt>$</prompt> <userinput>postgres -p 1234</userinput>
</screen>
要连接到这个服务器使用<application>psql</>，用 -P 选项指定这个端口：
<screen>
<prompt>$</prompt> <userinput>psql -p 1234</userinput>
</screen>
或者设置环境变量<envar>PGPORT</envar>：
<screen>
<prompt>$</prompt> <userinput>export PGPORT=1234</userinput>
<prompt>$</prompt> <userinput>psql</userinput>
</screen>
</para>

  <!--
<para>
   Named run-time parameters can be set in either of these styles:
<screen>
<prompt>$</prompt> <userinput>postgres -c work_mem=1234</userinput>
<prompt>$</prompt> <userinput>postgres &#045;-work-mem=1234</userinput>
</screen>
   Either form overrides whatever setting might exist for
   <varname>work_mem</> in <filename>postgresql.conf</>.  Notice that
   underscores in parameter names can be written as either underscore
   or dash on the command line.  Except for short-term experiments,
   it's probably better practice to edit the setting in
   <filename>postgresql.conf</> than to rely on a command-line switch
   to set a parameter.
  </para>
-->
<para>
命名的运行时参数可以用下列的风格之一设置：
<screen>
<prompt>$</prompt> <userinput>postgres -c work_mem=1234</userinput>
<prompt>$</prompt> <userinput>postgres --work-mem=1234</userinput>
</screen>
两种形式都覆盖那些现有的在<filename>postgresql.conf</>里面的<varname>work_mem</>设置。
请注意在参数名里的下划线在命令行上可以写成下划线，也可以写成连字符。
除了用于短期的实验以外，更好的习惯是编辑<filename>postgresql.conf</>里面的设置，
而不是倚赖命令行开关设置参数。
</para>
 </refsect1>

 <refsect1>
  <!--
<title>See Also</title>
-->
<title>又见</title>
<para>
   <xref linkend="app-initdb">,
   <xref linkend="app-pg-ctl">
  </para>
 </refsect1>
</refentry>
